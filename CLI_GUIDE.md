# CLI Guide - Руководство по консольному интерфейсу

## Запуск

Для запуска консольного интерфейса используйте:

```bash
python main.py --cli
```

## Структура меню

### Главное меню
```
1. Базовый пример
2. Тесты
0. Выход
```

### 1. Базовый пример

Быстрая демонстрация встраивания текста с выбором алгоритма:

#### Алгоритмы:
- **LSB (Least Significant Bit)** - классический побитовый метод
- **DCT (Discrete Cosine Transform)** - частотный метод на основе DCT

Пример использования:
```
1. Базовый пример → 2. DCT
```

Результат: встраивание и извлечение тестового текста "Hello, DCT Watermark!"

### 2. Тесты

#### 2.1 Integration tests

Интерактивные демонстрации с визуализацией:

1. **LSB: Встроить текст в изображение** - работа с текстовыми водяными знаками (LSB)
2. **LSB: Встроить изображение** - встраивание изображения в изображение (LSB)
3. **DCT: Демо встраивания текста** - интерактивная демонстрация DCT для текста
4. **DCT: Демо встраивания изображения** - интерактивная демонстрация DCT для изображений

##### DCT: Демо встраивания текста

Интерактивное демо с настройкой параметров:

```
Главное меню → 2. Тесты → 1. Integration tests → 3. DCT: Демо встраивания текста
```

**Возможности:**
- Настройка силы встраивания (strength)
- Автоматическая генерация тестовых изображений
- Проверка корректности восстановления
- Визуализация результатов (matplotlib)

**Пример:**
```
Введите силу встраивания (рекомендуется 10-20): 15
Показать визуализацию? (y/n): y
```

##### DCT: Демо встраивания изображения

Демонстрация встраивания изображения с метриками качества:

```
Главное меню → 2. Тесты → 1. Integration tests → 4. DCT: Демо встраивания изображения
```

**Метрики:**
- MAE (Mean Absolute Error) - средняя абсолютная ошибка
- MSE (Mean Square Error) - среднеквадратичная ошибка
- PSNR - отношение сигнал/шум

**Визуализация:**
- Исходный контейнер и стегоизображение
- Разница между контейнерами
- Исходное и восстановленное секретное изображение
- Разница между секретными изображениями

#### 2.2 Unit tests

Автоматическое выполнение юнит-тестов:

1. **LSB Text** - тесты для LSB текстового алгоритма
2. **LSB Image** - тесты для LSB графического алгоритма
3. **DCT Text** - тесты для DCT текстового алгоритма
4. **DCT Image** - тесты для DCT графического алгоритма
5. **Все LSB тесты** - все тесты LSB (текст + изображения)
6. **Все DCT тесты** - все тесты DCT (текст + изображения)
7. **Все Unit тесты** - полный набор юнит-тестов

**Пример запуска:**
```
Главное меню → 2. Тесты → 2. Unit tests → 6. Все DCT тесты
```

Результат: выполнение 16 тестов для DCT алгоритма

## Примеры использования

### Пример 1: Быстрый тест DCT
```bash
python main.py --cli
# Выбрать: 1 → 2 → 0
```

### Пример 2: Запуск всех DCT тестов
```bash
python main.py --cli
# Выбрать: 2 → 2 → 6 → 0 → 0 → 0
```

### Пример 3: Интерактивное демо DCT текста
```bash
python main.py --cli
# Выбрать: 2 → 1 → 3
# Ввести силу: 15
# Показать визуализацию: y
```

### Пример 4: Сравнение LSB и DCT
```bash
# LSB демо
python main.py --cli
# Выбрать: 1 → 1 → 0 → 0

# DCT демо
python main.py --cli
# Выбрать: 1 → 2 → 0 → 0
```

## Отличия LSB и DCT

| Характеристика | LSB | DCT |
|---------------|-----|-----|
| Ёмкость | Высокая (1-8 бит/пиксель) | Низкая (1 бит/блок 8x8) |
| Робастность | Низкая | Высокая |
| Визуальное качество | Отличное | Отличное |
| Устойчивость к сжатию | Нет | Да |
| Сложность | Низкая | Средняя |

## Параметры алгоритмов

### LSB параметры
- `depth` (1-8) - количество младших бит для встраивания
- `length` - длина текста для извлечения (байты)
- `secret_shape` - форма секретного изображения

### DCT параметры
- `strength` (10-30) - сила встраивания водяного знака
  - 10-15: минимальные искажения
  - 15-20: баланс между качеством и устойчивостью
  - 20-30: максимальная устойчивость
- `block_size` (обычно 8) - размер блока DCT
- `length` - длина текста для извлечения (байты)
- `secret_shape` - форма секретного изображения

## Горячие клавиши

- `0` - назад/выход на каждом уровне меню
- `Ctrl+C` - аварийный выход из программы

## Требования

Для работы CLI необходимы следующие библиотеки:
```bash
pip install numpy opencv-python matplotlib pillow
```

## Устранение неполадок

### Проблема: "Module not found"
**Решение:** Установите зависимости через `pip install -r requirements.txt`

### Проблема: Matplotlib не показывает графики
**Решение:** Убедитесь, что установлен графический бэкенд для matplotlib

### Проблема: Тесты не запускаются
**Решение:** Убедитесь, что находитесь в корневой директории проекта

## Дополнительная информация

Для запуска GUI версии используйте:
```bash
python main.py
# или
python main.py --gui
```
